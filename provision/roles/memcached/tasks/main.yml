---
- name: install memcached
  yum:
    name: memcached
- name: create memcached setting file
  template:
    src: memcached.j2
    dest: /etc/sysconfig/memcached
  notify: restart memcached
- name: memcached is active and enabled on system startup
  systemd:
    name: memcached
    state: started
    enabled: true
- name: allow memcached port
  firewalld:
    port: "{{ memcached_cfg.port|default(11211) }}/tcp"
    permanent: true
    state: enabled
  when: memcached_allow_host is defined
  notify: restart firewalld
