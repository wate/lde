---
# code: language=ansible
# Verify SSL/TLS configuration
- name: Verify Dehydrated installation
  tags:
    - verify
    - verify_ssl
    - verify_dehydrated
  ansible.builtin.assert:
    that:
      - ansible_facts.packages['dehydrated'] is defined
    quiet: "{{ assert_quiet_mode }}"
    fail_msg: "Dehydrated is not installed"
    success_msg: "Dehydrated is installed"
- name: Check Dehydrated configuration directory
  ansible.builtin.stat:
    path: /etc/dehydrated
  register: dehydrated_config_result
- name: Verify Dehydrated configuration directory
  tags:
    - verify
    - verify_ssl
    - verify_dehydrated
  ansible.builtin.assert:
    that:
      - dehydrated_config_result.stat.exists
      - dehydrated_config_result.stat.isdir
    quiet: "{{ assert_quiet_mode }}"
    fail_msg: "Dehydrated configuration directory does not exist"
    success_msg: "Dehydrated configuration directory exists"
