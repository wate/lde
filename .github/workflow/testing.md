テストワークフロー
=========================

作業フロー
-------------------------

### テスト準備

1. テスト方針の確認: プロジェクトのテスト品質基準を把握
2. テスト対象の特定: 何をテストすべきかを明確化
3. テストケースの設計: 正常系・異常系・境界値のテストケースを設計

### テスト実装手順

1. テストコードの作成: ユニットテスト、統合テストの実装
2. テストの実行: ローカル環境でテストを実行し、動作確認
3. カバレッジの確認: テストカバレッジを測定し、不足箇所を特定
4. テストのリファクタリング: テストコードの可読性と保守性を改善

### テスト完了チェック

1. すべてのテストがパス: 新規テスト・既存テストすべてが成功
2. カバレッジ基準の達成: プロジェクトで定めたカバレッジ基準を満たす
3. エッジケースのカバー: 境界値や異常系のテストを網羅

絶対遵守ルール
-------------------------

このセクションの全項目は必須です。

### テスト作成の原則

- テストのスキップ禁止: テストをスキップせず、問題があれば修正する
- 振る舞いのテスト: 実装詳細ではなく振る舞いをテスト
- エラーケースのカバー: エラーケースも必ずテストでカバーする
- テストの独立性: テスト間の依存を避け、任意の順序で実行可能にする

### テストコード品質

- 明確なテスト名: テスト名から何をテストしているかが分かる
- AAA パターン: Arrange(準備), Act(実行), Assert(検証)を明確に分離
- 1テスト1検証: 1つのテストで1つのことだけを検証

### 禁止事項

- 実装を見ずにテストをパスさせる: テストが実装の正しさを保証していない
- テストの重複: 同じことを複数のテストで検証しない
- 不安定なテスト: 実行タイミングによって結果が変わるテストを作らない

推奨ルール
-------------------------

このセクションは推奨事項です。

### テスト戦略

- テスト駆動開発(TDD): 先にテストを書き、実装し、リファクタリング
- テストピラミッド: ユニットテスト(多)、統合テスト(中)、E2Eテスト(少)のバランス
- カバレッジ目標: 新規コードは80%以上のカバレッジを目指す
- カバレッジの位置づけ: カバレッジは指標であり、質の高いテストを重視する

### テストデータ管理

- フィクスチャの活用: テストデータを適切に管理
- テストDBの分離: 本番データとテストデータを分離
- データのクリーンアップ: テスト実行後は必ずクリーンアップ

### パフォーマンステスト

- 高速なテスト: テストは高速で、常に同じ結果を返すように
- 遅いテストの分離: 時間のかかるテストは別グループに分離
- 並列実行の活用: テストを並列実行して時間短縮

参考リンク
-------------------------

### 必須参照ドキュメント

- [テスト方針](../../docs/test_policy.md): テスト品質基準を取得

### 参考ドキュメント

- [開発作業共通ワークフロー](./development.md): 情報収集の基本手順
- [コーディング規約](../../docs/code_style.md): テストコードの品質基準
