タスク管理ワークフロー
=========================

概要
-------------------------

作業指示書ベースの作業を効率的に進めるためのワークフローです。
GitHub Copilotが作業指示書ファイル(*.md)を受け取った際の標準手順を定義します。

作業指示書ベースの作業管理
-------------------------

### 対象作業

作業指示書ファイル(*.md)が提供された場合の作業管理

### 実行手順

#### 作業指示書の解析

- 提供された作業指示書を`read_file`で取得
- 「チケット・課題番号」項目からプロジェクト管理ツールの識別子を確認
- 依頼内容、背景・理由、前提条件、詳細情報を把握

#### 作業プランファイル名の決定

- チケット・課題番号が記載されている場合:
    - Redmine: `#1234` → `workplan-ticket-1234.md`
    - Backlog: `PROJECT-567` → `workplan-PROJECT-567.md`  
    - GitHub: `#1234` → `workplan-issue-1234.md`、`owner/repo#1234` → `workplan-owner-repo-1234.md`
    - その他: 記載された識別子をそのまま使用
- チケット・課題番号が未記載の場合: `workplan-YYYY-MM-DD.md`

#### 既存作業プランファイルの確認

- 決定したファイル名で既存の作業プランファイルを`read_file`で取得
- 存在する場合: 進捗状況、過去の指摘事項、次回作業予定を把握
- 存在しない場合: 新規作業プランファイルを作成

#### 過去の指摘事項の反映

- 作業プランファイルの「過去の指摘事項・改善点」セクションを確認
- 同様の問題を避ける実装方針を決定
- 蓄積された品質基準を適用

作業プラン管理形式(標準テンプレート)
-------------------------

新規作業プラン作成時は以下の形式を使用する。

```markdown
作業プラン - {作業名/チケット番号}
=========================

このドキュメントの使い方
-------------------------

- 作業開始時: 過去の指摘事項を確認、前日までの作業履歴が整理されていない場合は要点をまとめる
- 作業中: 実施内容を該当タスクの下に箇条書きでメモ
- タスク完了時: チェックボックスにチェック、タスク下のメモを作業履歴セクションにまとめて移動、元のメモは削除

作業指示書情報
-------------------------

- 元となる指示書: {作業指示書のファイルパス}
- チケット・課題番号: {プロジェクト管理ツールの識別子}
- 関連URL: {プロジェクト管理ツールのURL}
- 作業開始日: YYYY-MM-DD

作業分解・計画
-------------------------

### 主要タスク

- [ ] タスク1: 詳細説明
- [ ] タスク2: 詳細説明

### 技術調査項目

- [ ] 調査項目1
- [ ] 調査項目2

### 完了条件

1. 機能要件の充足
2. 品質基準のクリア
3. テストの完了

過去の指摘事項・改善点
-------------------------

### コーディング品質

- [日付] 指摘内容: 具体的な改善指示

### 設計・アーキテクチャ

- [日付] 指摘内容: 設計上の改善点

### ドキュメント・テスト

- [日付] 指摘内容: ドキュメント・テスト不備

品質基準・注意事項
-------------------------

- 蓄積された指摘事項を踏まえた実装を行う
- 同様の問題の再発防止を意識する
- 品質基準の向上を継続的に図る

作業履歴
-------------------------

### セッション1 (YYYY-MM-DD HH:MM-HH:MM)

- 実施内容: 具体的な作業内容
- 完了タスク: [x] 完了したタスク
- 技術的判断: 重要な設計・実装判断
- 発生課題: 課題とその解決方法
- 受けた指摘: ユーザーからの指摘内容と対応
- 作成・修正ファイル: ファイルパス一覧
```

作業指示書への作業プランリンク追記
-------------------------

作業プラン作成後、元となる作業指示書に自動的にリンクを追記する。

### 新規作業プランファイル作成時

- 作業プランファイルを作成後、作業指示書を再度取得
- 「関連ファイル」セクションに作業プランへのリンクを追記

### リンク追記形式

```markdown
関連ファイル
-------------------------

- [作業プラン - {作業名/チケット番号}]({作業プランファイルパス})
    - 作成日: YYYY-MM-DD
    - 最終更新: YYYY-MM-DD
```

指摘事項の自動管理
-------------------------

作業中および作業完了時に指摘事項を自動的に管理する。

### 作業開始時の指摘事項確認

- 作業プランファイルの「過去の指摘事項・改善点」を必ず確認
- 該当する指摘事項を踏まえた実装方針を決定
- 同様の問題を避けるための対策を事前検討

### 実装中の品質確保

- 過去の指摘事項に基づく品質基準を意識
- コーディング規約、設計原則、テスト方針を厳格に適用

### 指摘受領時の記録

- ユーザーから新たな指摘を受けた場合、即座に作業プランファイルに記録
- 指摘内容、対応方法、今後の注意点を明確に文書化
- 適切なカテゴリー(コーディング品質、設計・アーキテクチャ、ドキュメント・テスト)に分類

### 作業完了・中断時の更新

- 作業履歴に新しいセッション情報を追記
- 改善された点と残課題を明確に記録
- 次回セッションでの注意事項として整理
- 作業指示書の「関連ファイル」セクションの最終更新日時を更新

継続作業時の状況復元
-------------------------

作業指示書のみが提供された継続作業時の手順。

### 作業指示書からの情報取得

- 作業指示書の「関連ファイル」セクションから作業プランファイルのパスを特定
- 特定した作業プランファイルを`read_file`で自動取得

### 完全な状況復元

- 作業指示書: 元々の要件・仕様の再確認
- 作業プランファイル: 現在の進捗状況・技術的判断・過去の指摘事項の把握
- 次回作業予定と注意事項の確認

### 作業再開

- チェックボックスの状態から進捗を把握
- 過去の指摘事項を踏まえた高品質な実装を継続

品質向上の自動化
-------------------------

以下のルールで継続的な品質向上を図る。

- 同一指摘の防止: 過去に指摘された内容は必ず事前チェックし、同様の問題を発生させない
- 品質基準の段階的向上: 指摘事項を踏まえて、より高い品質基準での実装を行う
- 学習効果の最大化: 指摘内容から改善パターンを抽出し、類似の実装に適用
- プロアクティブな改善: 指摘を受ける前に、蓄積された知見を基に自主的に品質向上を図る
